import greenfoot.*;  // (World, Actor, GreenfootImage, Greenfoot and MouseInfo)

/**
 * Write a description of class InvulnerabilityManager here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class InvulnerabilityManager
{
   private Actor subject;
   private boolean isInvulnerable;
   private int framesCount;
   private int framesCountMax;
   private int flashCount;
   private int flashCountMax;
   
   public InvulnerabilityManager(Actor subject)
   {
       this.subject = subject;
       isInvulnerable = false;
       framesCount = 50;
       framesCountMax = 100;
       flashCount = 10;
       flashCountMax = 10;
    }
    
   public void setInvulnerable()
   {
       isInvulnerable = true;
   }
   
   public void setVulnerable()
   {
       isInvulnerable = false;
   }
   
   public boolean isInvulnerable()
   {
       return isInvulnerable;
   }
   
   private void flashTimer()
   {
       if(flashCount > 0)
       {
           flashCount--;
       }
       else
       {
           flashCount = flashCountMax;
           flash();
       }
   }
   
   private void flash()
   {
       GreenfootImage img = subject.getImage();
       if(img.getTransparency() == 255)
       {
           img.setTransparency(100);
       }
       else
       {
           img.setTransparency(255);
       }
       
   }
   
   public void manageInvulnerability()
   {
       if(framesCount > 0 && isInvulnerable)
       {
           framesCount--;
           flash();
       }
       else
       {
           framesCount = framesCountMax;
           isInvulnerable = false;
           subject.getImage().setTransparency(255);
       }
   }
}
